<!doctype html>
<html lang="en">


<head>
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-widthinitial-scale=1">
    <title>undefined</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
        integrity="sha256-YvdLHPgkqJ8DVUxjjnGVlMMJtNimJ6dYkowFFvp4kKs=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fontsource/roboto@4.5.1/latin-300.css"
        integrity="sha256-69VEtqsA54dXolmlOOpB6AUTkUBjI8SjBKCQ7ycib6I=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fontsource/roboto@4.5.1/latin-700.css"
        integrity="sha256-tB5d+zyWiHQFQmJbLkUB/R3yq3K5zmN+38cBOZBwjkg=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fontsource/roboto-mono@4.5.0/latin-300.css"
        integrity="sha256-/bTf0ZdBXp9eQn0Xbgim3IoygJpVg108KstIe5AKO7E=" crossorigin="anonymous">
</head>

<body>

    <section class="container mt-5">

        <div class="row justify-content-center">
            <div class="col-12 col-lg-8">

                <h1>haeley-<strong>colors</strong></h1>
                <p class="lead">Test Page for Development</p>
                <p>// about:
                    version <code id="version">version</code>,
                    branch <code id="branch">branch</code>,
                    commit <code id="commit">commit</code>.
                </p>

            </div>
        </div>

        <div class="row mt-4 justify-content-center">
            <div class="col-12 col-lg-8 text-start">

                <table class="table caption-top small">
                    <caption>Test: fetch scales from json files:</caption>
                    <thead>
                        <tr>
                            <th scope="col">
                                <code class="fw-bold">&lt;Preset&gt;</code>
                                <code class="fw-bold text-muted">-&lt;NumColors&gt;</code>
                            </th>
                            <th scope="col">Preset File</th>
                            <th scope="col">Scale Preview</th>
                        </tr>
                    </thead>
                    <tbody id="scales">
                    </tbody>
                </table>

            </div>
        </div>

    </section>

    <footer>
        <div class="row text-center">
            <div class="col-12">
                <p class="mt-5 mb-4">
                    &copy; 2016&thinsp;&ndash;&thinsp;<span id="cryear"></span>
                </p>
            </div>
        </div>
    </footer>

</body>

<script type="module">
    import * as auxiliaries from 'haeley-auxiliaries';
    import * as math from 'haeley-math';
    import * as colors from './index.ts';
    window['haeley'] = { auxiliaries, math, colors };
</script>

<script>
    window.onload = () => {

        document.title = __LIB_NAME__;
        document.querySelector('#version').innerHTML = haeley.colors.version();
        document.querySelector('#branch').innerHTML = haeley.colors.branch();
        document.querySelector('#commit').innerHTML = haeley.colors.commit();
        document.querySelector('#cryear').innerHTML = new Date().getFullYear();

        console.log("'haeley-colors' imported:", haeley);


        const presets = [
            ['smithwalt', 'viridis', 1, false],
            ['smithwalt', 'viridis', 64, false],
            ['smithwalt', 'inferno', 7, false],
            ['smithwalt', 'inferno', 64, false],

            ['marcosci', 'cividis', 7, false],
            ['marcosci', 'cividis', 64, false],
            ['smithwalt', 'magma', 7, false],
            ['smithwalt', 'magma', 64, false],

            ['colorbrewer', 'Greys', 4, true],
            ['colorbrewer', 'Greys', 7, true],
            ['smithwalt', 'plasma', 7, false],
            ['smithwalt', 'plasma', 64, false],

            ['colorbrewer', 'Spectral', 7, true],
            ['colorbrewer', 'Spectral', 64, true],
            ['mikhailov', 'turbo', 16, false],
            ['mikhailov', 'turbo', 128, false],

            ['colorbrewer', 'BrBG', 7, true],
            ['colorbrewer', 'RdBu', 64, true],
            ['colorbrewer', 'RdYlBu', 7, true],
            ['colorbrewer', 'PuOr', 7, true],

            ['colorbrewer', 'OrRd', 4, false],
            ['colorbrewer', 'OrRd', 7, false],
            ['colorbrewer', 'RdPu', 4, false],
            ['colorbrewer', 'RdPu', 7, false],

            ['colorbrewer', 'Accent', 7, false],
            ['colorbrewer', 'Paired', 7, false],
            ['colorbrewer', 'Pastel2', 7, false],
            ['colorbrewer', 'Dark2', 7, false]
        ];

        var tbody = document.getElementById('scales');

        presets.forEach((value, index) => {

            const file = `./${value[0]}.json`;
            const preset = value[1];
            const stepCount = value[2];
            const invert = value[3];

            tbody.insertAdjacentHTML('beforeend',
                `<tr class="align-middle m-0 p-0">` +
                `<th scope="row"><code>${preset}</code><code class="text-muted">-${stepCount}${value[3] ? '-inverted' : ''}</code></th>` +
                `<td><code class="text-muted">${file}</code></td>` +
                `<td><canvas class="" id="scale-${index}"></canvas></td>` +
                `</tr>`);

            haeley.colors.ColorScale.fromPreset(file, preset, stepCount).then(
                (scale) => {
                    const canvas = document.getElementById(`scale-${index}`);
                    const context = canvas.getContext('2d');

                    canvas.width = stepCount;
                    canvas.height = 1;
                    if (invert) {
                        scale.invert();
                    }

                    const image = new ImageData(scale.bitsUI8(), Math.max(2, stepCount), 1);
                    context.putImageData(image, 0, 0);
                });

        });

    };
</script>

<style>
    body {
        font-weight: 300;
        font-family: "Roboto";
    }

    strong {
        font-weight: 700;
    }

    code {
        font-weight: 300 !important;
        font-size: 1em;
        font-family: "Roboto Mono" !important;
    }

    canvas {
        image-rendering: pixelated;
        height: 2rem;
        width: 14rem;
    }
</style>

</html>
